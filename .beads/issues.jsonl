{"id":"Claide-1mz","title":"Terminal interaction: selection, copy/paste, context menu","description":"Epic: bring terminal interaction to parity with iTerm2. Includes text selection (simple, word, line, block), copy/paste, scrollback, right-click context menu, and mouse reporting for TUI apps.","status":"open","priority":1,"issue_type":"feature","owner":"alex.geana@erepubliklabs.com","created_at":"2026-02-04T17:37:39.512154+02:00","created_by":"Alexandru Geana","updated_at":"2026-02-04T17:37:39.512154+02:00"}
{"id":"Claide-5sd","title":"Add scrollback support (scroll wheel + Shift+PageUp/Down)","description":"Enable scrollback buffer viewing:\n- alacritty_terminal Term already has a scrollback buffer (configurable via Config.scrolling.history, default 10000 lines).\n- Need FFI function: claide_terminal_scroll(handle, delta) that calls term.scroll_display(Scroll::Delta(delta)).\n- Override scrollWheel(with:) in MetalTerminalView to call bridge.scroll(delta).\n- Shift+PageUp/PageDown: scroll by half screen height.\n- Modify snapshot to use display_offset for correct viewport rendering (already handled if Term.grid() respects display_offset).\n- When user scrolls up, new output should NOT auto-scroll down until user returns to bottom.","status":"open","priority":2,"issue_type":"task","owner":"alex.geana@erepubliklabs.com","created_at":"2026-02-04T17:38:35.671311+02:00","created_by":"Alexandru Geana","updated_at":"2026-02-04T17:38:35.671311+02:00"}
{"id":"Claide-amh","title":"Add TerminalBridge Swift wrappers for selection","description":"Add Swift methods to TerminalBridge that call the new Rust FFI selection functions:\n- startSelection(row:col:side:type:)\n- updateSelection(row:col:side:)\n- clearSelection()\n- selectedText() -\u003e String?\nSide and SelectionType enums in Swift mirroring the C constants.\nNo logic here — pure pass-through to FFI.","status":"closed","priority":1,"issue_type":"task","owner":"alex.geana@erepubliklabs.com","created_at":"2026-02-04T17:37:54.136509+02:00","created_by":"Alexandru Geana","updated_at":"2026-02-04T17:45:47.290042+02:00","closed_at":"2026-02-04T17:45:47.290042+02:00","close_reason":"Swift wrappers implemented and building","dependencies":[{"issue_id":"Claide-amh","depends_on_id":"Claide-goa","type":"blocks","created_at":"2026-02-04T17:38:51.087158+02:00","created_by":"Alexandru Geana"}]}
{"id":"Claide-e4j","title":"Forward mouse events to terminal for TUI apps","description":"TUI apps (vim, htop, less, fzf) request mouse reporting via escape sequences. When the terminal is in mouse mode, mouse events should be forwarded as escape sequences instead of being used for text selection.\n- Check Term.mode() for mouse reporting flags (SGR_MOUSE, MOUSE_REPORT_CLICK, etc.) before handling mouse events for selection.\n- If mouse mode is active: encode mouse events as SGR escape sequences and write to bridge.\n- SGR format: ESC[\u003cbutton;col;row;M (press) or ESC[\u003cbutton;col;row;m (release).\n- This makes vim mouse mode, fzf clicking, etc. work properly.\n- Mode flags need to be exposed in ClaideGridSnapshot.mode_flags or via a separate FFI call.","status":"open","priority":2,"issue_type":"task","owner":"alex.geana@erepubliklabs.com","created_at":"2026-02-04T17:38:44.450781+02:00","created_by":"Alexandru Geana","updated_at":"2026-02-04T17:38:44.450781+02:00","dependencies":[{"issue_id":"Claide-e4j","depends_on_id":"Claide-vpn","type":"blocks","created_at":"2026-02-04T17:38:51.588912+02:00","created_by":"Alexandru Geana"}]}
{"id":"Claide-fk7","title":"Render selection highlight in Metal shader","description":"Modify the grid snapshot and Metal rendering pipeline to highlight selected cells:\n- Extend ClaideGridSnapshot to include per-cell selection flag (or a selection range struct). Per-cell flag (1 bit in ClaideCellData.flags) is simplest since Selection.to_range().contains(point) can be checked per cell during snapshot.\n- In GridRenderer.update(), when a cell is selected, swap fg/bg colors (matching terminal convention) or blend with a selection color.\n- Alternative: add a selection render pass in the Metal shader. Swapping fg/bg in the snapshot is simpler and matches iTerm2/Alacritty behavior.","status":"in_progress","priority":1,"issue_type":"task","owner":"alex.geana@erepubliklabs.com","created_at":"2026-02-04T17:38:02.30041+02:00","created_by":"Alexandru Geana","updated_at":"2026-02-04T17:45:47.391936+02:00","dependencies":[{"issue_id":"Claide-fk7","depends_on_id":"Claide-goa","type":"blocks","created_at":"2026-02-04T17:38:51.175864+02:00","created_by":"Alexandru Geana"}]}
{"id":"Claide-goa","title":"Expose selection API through Rust FFI","description":"Add C FFI functions to claide_terminal.h for selection management. alacritty_terminal already has Selection type with Simple/Block/Semantic/Lines modes, Term.selection field, and Term.selection_to_string(). Need to expose:\n- claide_terminal_selection_start(handle, row, col, side, type) — create Selection\n- claide_terminal_selection_update(handle, row, col, side) — update endpoint\n- claide_terminal_selection_clear(handle) — clear selection\n- claide_terminal_selection_text(handle) -\u003e char* — extract selected text via Term.selection_to_string()\n- Add selection range to ClaideGridSnapshot (start_row, start_col, end_row, end_col, is_block, has_selection) so the renderer knows which cells to highlight.\nSide enum: Left=0, Right=1. Type enum: Simple=0, Block=1, Semantic=2, Lines=3.","status":"closed","priority":1,"issue_type":"task","owner":"alex.geana@erepubliklabs.com","created_at":"2026-02-04T17:37:48.476997+02:00","created_by":"Alexandru Geana","updated_at":"2026-02-04T17:44:56.45709+02:00","closed_at":"2026-02-04T17:44:56.45709+02:00","close_reason":"FFI functions implemented and building clean"}
{"id":"Claide-pm0","title":"Add right-click context menu","description":"Implement NSMenu-based right-click context menu in MetalTerminalView:\n- Override menu(for:) to return contextual menu.\n- Menu items: Copy (enabled when selection exists), Paste, Select All, Clear Selection, separator, Clear Buffer.\n- Copy action: same as Cmd+C handler.\n- Paste action: same as Cmd+V handler.\n- Select All: set selection to cover entire visible grid.\n- Clear Buffer: send clear-screen escape or bridge method.\n- Menu should update item enabled states based on current state (has selection, has pasteboard content).","status":"open","priority":2,"issue_type":"task","owner":"alex.geana@erepubliklabs.com","created_at":"2026-02-04T17:38:27.092376+02:00","created_by":"Alexandru Geana","updated_at":"2026-02-04T17:38:27.092376+02:00","dependencies":[{"issue_id":"Claide-pm0","depends_on_id":"Claide-snt","type":"blocks","created_at":"2026-02-04T17:38:51.507871+02:00","created_by":"Alexandru Geana"}]}
{"id":"Claide-snt","title":"Implement copy/paste (Cmd+C, Cmd+V)","description":"Add clipboard integration:\n- Cmd+C: if selection exists, call bridge.selectedText() and write to NSPasteboard.general. Clear selection after copy.\n- Cmd+V: read NSPasteboard.general string, write to bridge (terminal input). Use bracketed paste mode if terminal supports it (check mode_flags for BRACKETED_PASTE).\n- Bracketed paste: wrap pasted text in ESC[200~ ... ESC[201~ when the terminal has requested it.\n- Hook into performKeyEquivalent for Cmd+C/V since they're key equivalents, not regular key events.","status":"open","priority":1,"issue_type":"task","owner":"alex.geana@erepubliklabs.com","created_at":"2026-02-04T17:38:19.018926+02:00","created_by":"Alexandru Geana","updated_at":"2026-02-04T17:38:19.018926+02:00","dependencies":[{"issue_id":"Claide-snt","depends_on_id":"Claide-vpn","type":"blocks","created_at":"2026-02-04T17:38:51.436125+02:00","created_by":"Alexandru Geana"}]}
{"id":"Claide-vpn","title":"Handle mouse events for text selection in MetalTerminalView","description":"Implement mouseDown/mouseDragged/mouseUp in MetalTerminalView for text selection:\n- mouseDown: convert click point to grid (row, col, side) using atlas.cellWidth/cellHeight. Start Simple selection via bridge. Single click starts selection, double-click starts Semantic (word), triple-click starts Lines.\n- mouseDragged: update selection endpoint, set needsRedraw.\n- mouseUp: finalize selection (keep it visible until next click or text input).\n- Coordinate conversion: pixel_x / cellWidth = col, pixel_y / cellHeight = row. Side = Left if within first half of cell, Right otherwise.\n- Track click count with timestamp-based detection (NSEvent.clickCount handles this).","status":"open","priority":1,"issue_type":"task","owner":"alex.geana@erepubliklabs.com","created_at":"2026-02-04T17:38:10.380037+02:00","created_by":"Alexandru Geana","updated_at":"2026-02-04T17:38:10.380037+02:00","dependencies":[{"issue_id":"Claide-vpn","depends_on_id":"Claide-amh","type":"blocks","created_at":"2026-02-04T17:38:51.25346+02:00","created_by":"Alexandru Geana"},{"issue_id":"Claide-vpn","depends_on_id":"Claide-fk7","type":"blocks","created_at":"2026-02-04T17:38:51.343109+02:00","created_by":"Alexandru Geana"}]}
